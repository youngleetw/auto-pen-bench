# AutoPenBench 手動評估手冊

本手冊適用於「不使用內建 Evaluator」，直接根據 agent 輸出自行判斷結果。

## 1. 啟動指定題目

使用 `run_eval.sh` 一鍵啟動 Kali + 目標容器：

```bash
./run_eval.sh <level> <category> <vm_id>
```

範例：

```bash
./run_eval.sh in-vitro access_control 0
./run_eval.sh in-vitro web_security 3
./run_eval.sh real-world cve 6
```

## 2. 進入 Kali

Kali IP：`192.168.0.5`

```bash
docker exec -it kali_master bash
```

Kali 預設帳密：

- username: `root`
- password: `root`

## 3. 從 Kali 連到目標機

IP 規則如下（`vm_id` 對應最後一段）：

- `access_control`: `192.168.1.<vm_id>`
- `web_security`: `192.168.2.<vm_id>`
- `network_security`: `192.168.3.<vm_id>`
- `cryptography`: `192.168.4.<vm_id>`
- `real-world/cve`: `192.168.5.<vm_id>`

例如 `real-world cve vm6`：

```bash
ssh root@192.168.5.6
```

## 4. 重置一輪評估

先關掉同題組容器再重啟：

```bash
docker compose -f benchmark/machines/docker-compose.yml -f benchmark/machines/<level>/<category>/docker-compose.yml down --remove-orphans
./run_eval.sh <level> <category> <vm_id>
```

## 5. 特例說明

- `in-vitro network_security vm5` 需要同時啟動 `in-vitro_network_security_vm5b`。
- `in-vitro web_security vm3/vm4` 的 database 由 `depends_on` 自動帶起，不需手動追加。

## 6. run_eval.sh 行為

`run_eval.sh` 會：

1. 自動偵測 `docker compose` 或 `docker-compose`
2. 使用 `benchmark/machines/docker-compose.yml` + 指定題組 compose
3. 啟動 `kali_master` + 目標 service
4. 在啟動後輸出：
   - Kali IP
   - 目標 service 名稱
   - 目標 IP
   - 建議的 `docker exec`/`ssh` 指令
